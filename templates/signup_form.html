<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Thu Oct 19 2023 16:34:52 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="6531596f32ef29410701f711" data-wf-site="645383c6d61fde1c2e8b2ff3">
<head>
  <meta charset="utf-8">
  <title>Select userType</title>
  <meta content="Select userType" property="og:title">
  <meta content="Select userType" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="{{ url_for('static', filename='css/normalize.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/webflow.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/pninas-dandy-site.webflow.css') }}" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <script src="https://unpkg.com/@descope/web-component@latest/dist/index.js"></script>
  <script src="https://unpkg.com/@descope/web-js-sdk@latest/dist/index.umd.js"></script>
  <style>
    .active-button {
      background-color: #99301a !important;
      color: white !important;
    }
  </style>
</head>
<body class="body">
  <div class="container w-container">
    <section class="hero-without-image">
<!--      <div class="container-2"></div>-->
<!--      <div class="text-block-6">Select you user type again for verification: </div>-->
<!--      <div class="w-layout-blockcontainer container-8 w-container">-->
<!--        <a href="#" id="show-teacher-form" class="button-3 w-button"><strong class="bold-text-2">Teacher</strong></a>-->
<!--        <a href="#" id="show-parent-form" class="button-3 w-button"><strong class="bold-text-3">Parent</strong></a>-->
<!--      </div>-->
      <div id="teacher-form" style="display: none;">
        <div class="text-block-2">Please fill out the following information to complete the sign up. </div>
        <div class="w-layout-blockcontainer container-7 w-container">
          <div class="w-form">
            <form id="teacher_form" name="teacher-form" data-name="Teacher Form" method="post" action="{{ url_for('submit_form') }}" class="form-2" data-wf-page-id="653138e52f64b84fca6e4c38" data-wf-element-id="fb49e10c-fcb3-3e08-165b-8a779e568032">
              <label for="teacher_email" class="field-label">Email</label><input type="email" class="w-input" maxlength="256" name="teacher_email" data-name="teacher_email" placeholder="" id="teacher_email" required="">
              <label for="teacher_birth_date" class="field-label">Birth Date </label><input type="date" class="w-input" maxlength="256" name="teacher_birth_date" data-name="teacher_birth_date" placeholder="" id="teacher_birth_date" required="">
              <label for="teacher_gender" class="field-label">Gender</label>
              <select id="teacher_gender" name="teacher_gender" data-name="teacher_gender" required="" class="w-select">
                <option value="" disabled selected>Select one...</option>
                <option value="male">Male </option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>

              <label for="city" class="field-label">City of School</label>
              <div id="city_error" style="color: red; display: none;">Please select a city from the list.</div>
                <input type="text" class="w-input" maxlength="256" name="city" data-name="city" placeholder="" id="teacher_city" required="" autocomplete="off">

              <label for="school_name" class="field-label">School Name </label>
              <div id="school_error" style="color: red; display: none;">Please select a school from the list.</div>
                <input type="text" class="w-input" maxlength="256" name="school_name" data-name="school_name" placeholder="" id="teacher_school_name" required="" autocomplete="off">


<!--              <label for="city" class="field-label">City of School</label>-->
<!--                <input type="text" class="w-input" maxlength="256" name="city" data-name="city" placeholder="" id="teacher_city" required="">-->
<!--              <label for="school_name" class="field-label">School Name </label><input type="text" class="w-input" maxlength="256" name="school_name" data-name="school_name" placeholder="" id="teacher_school_name" required="">-->

              <label class="field-label-2">Teacher type</label>
              <label class="radio-button-field w-radio"><input type="radio" id="primary_teacher" name="teacher_type" value="primary_teacher" data-name="teacher_type" required="" class="w-form-formradioinput w-radio-input">
                <span class="w-form-label" for="primary_teacher">Primary Teacher</span></label>
              <label class="radio-button-field w-radio"><input type="radio" id="subject_teacher" name="teacher_type" value="subject_teacher" data-name="teacher_type" required="" class="w-form-formradioinput w-radio-input">
                <span class="w-form-label" for="subject_teacher">Subject Teacher</span></label>
              <label for="grade" class="field-label-2">Which grade do you teach?</label><select id="teacher_grade" name="grade" data-name="grade" required="" class="w-select">
                <option value="" disabled selected>Select one...</option>
                <option value="1">1st grade </option>
                <option value="2">2nd grade</option>
                <option value="3">3rd grade</option>
                <option value="4">4th grade</option>
                <option value="5">5th grade</option>
                <option value="6">6th grade</option>
              </select>
              <input type="hidden" name="user_type" value="teacher">
              <input type="hidden" id="teacher_loginID" name="teacher_loginID" value="">
              <input type="hidden" id="teacher_name" name="teacher_name" value="">
              <input type="submit" value="Submit" data-wait="Please wait..." class="button-3 form w-button">
            </form>
          </div>
        </div>
      </div>
      <div id="parent-form" style="display: none;">
        <div class="text-block-2">Please fill out the following information to complete the sign up. </div>
        <div class="w-form">
          <form id="parent_form" name="parent_form" data-name="parent Form" method="post" action="{{ url_for('submit_form') }}" class="form-2" data-wf-page-id="6531466ef8b5af1727aa5250" data-wf-element-id="fb49e10c-fcb3-3e08-165b-8a779e568032">
            <div class="div-block">
              <div class="text-block-4">Personal Information</div>
              <label for="parent_email" class="field-label">Email </label><input type="email" class="w-input" maxlength="256" name="parent_email" data-name="parent_email" placeholder="" id="parent_email" required="">
              <label for="parent_birth_date" class="field-label">Birth Date </label><input type="date" class="w-input" maxlength="256" name="parent_birth_date" data-name="parent_birth_date" placeholder="" id="parent_birth_date" required="">
              <label for="parent_gender" class="field-label">Gender</label><select id="parent_gender" name="parent_gender" data-name="parent_gender" required="" class="w-select">
                <option value="">Select one...</option>
                <option value="male">Male </option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="div-block" id="child-form">
              <div class="text-block-4">Child Form </div>
              <label for="child_name" class="field-label">Childs&#x27; Name </label><input type="text" class="w-input" maxlength="256" name="child_name" data-name="child_name" placeholder="" id="child_name" required="">
              <label for="child_birth_date" class="field-label">Childs&#x27; Birth Date </label><input type="date" class="w-input" maxlength="256" name="child_birth_date" data-name="child_birth_date" placeholder="" id="child_birth_date" required="">
              <label for="child_gender" class="field-label">Childs&#x27; Gender</label><select id="child_gender" name="child_gender" data-name="child_gender" required="" class="w-select">
                <option value="">Select one...</option>
                <option value="male">Male </option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select><label for="city" class="field-label">City of School</label><input type="text" class="w-input" maxlength="256" name="city" data-name="city" placeholder="" id="city" required=""><label for="school_name" class="field-label">School Name </label><input type="text" class="w-input" maxlength="256" name="school_name" data-name="school_name" placeholder="" id="school_name" required=""><label for="grade" class="field-label-2">Grade</label><select id="grade" name="grade" data-name="grade" required="" class="w-select">
                <option value="">Select one...</option>
                <option value="1">1st grade </option>
                <option value="2">2nd grade</option>
                <option value="3">3rd grade</option>
                <option value="4">4th grade</option>
                <option value="5">5th grade</option>
                <option value="6">6th grade</option>
              </select><label for="teacher" class="field-label-2">Teacher</label><input type="text" class="w-input" maxlength="256" name="teacher" data-name="teacher" placeholder="" id="teacher" required="">
            </div>
            <div class="div-block-2">
              <div class="text-block-5"> If you have another child participating in the research </div>
              <a id="add_child" href="#" class="button-4 w-button">click here </a>
              <a id="remove" href="#" class="button-4 w-button" style="display: none;">Remove second child form</a>
            </div>
            <input type="hidden" name="user_type" value="parent">
            <input type="hidden" id="parent_loginID" name="parent_loginID" value="">
            <input type="hidden" id="parent_name" name="parent_name" value="">

            <input type="submit" value="Submit" data-wait="Please wait..." class="button-3 form w-button">
          </form>
        </div>
      </div>
    </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=645383c6d61fde1c2e8b2ff3" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!--  scripts for the autocomplete function -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
<!--  end of scripts for autocomplete-->
  <script src="{{ url_for('static', filename='js/webflow.js') }}" type="text/javascript"></script>
  <script>
    // retrieve the data that was sent from descopes jwt and save to form fields (for firebase DB)
    let loginID= sessionStorage.getItem("loginID");
    let name = sessionStorage.getItem("name");
    console.log('login', loginID)
    console.log('name', name)
    document.getElementById('teacher_loginID').value = loginID;
    document.getElementById('teacher_name').value = name;
    document.getElementById('parent_loginID').value = loginID;
    document.getElementById('parent_name').value = name;

  </script>
  <script>
    $(document).ready(function() {

      // present relevant form based on consent form submitted
      const parentForm = document.getElementById("parent-form");
      const teacherForm = document.getElementById("teacher-form");
      const selectedRole = localStorage.getItem('selectedRole');

      if (selectedRole === 'parent') {
          parentForm.style.display = "block";
      } else if (selectedRole === 'teacher') {
          teacherForm.style.display = "block";
      }

      var childCloneCount = 1; // Keep track of how many clones you've made
      var newChildForm;

      // Use event delegation for the 'add child' button
      $(document).on('click', '#add_child', function(e){
        e.preventDefault(); // Prevent the default anchor link behavior

        newChildForm = $("#child-form").first().clone(); // Clone the first child form
        childCloneCount++; // Increment the count

        newChildForm.attr('id', "child-form_" + childCloneCount); // Ensure that the cloned form has a unique ID

        // Update the IDs of the elements inside the new form
        newChildForm.find("[id]").each(function(){
          this.id += "_" + childCloneCount; // append the current count to the end of the current ID
        });

        // Update the names of the elements inside the new form if necessary to keep them unique
        newChildForm.find("[name]").each(function(){
          this.name += "_" + childCloneCount; // append the current count to the end of the current name
        });

        // Append the new form after the last one
        $("#child-form").last().after(newChildForm);

        // Optional: If you want the 'add child' button to only be present on the first form, or to disappear after being used once, you can remove it here.
        $(".text-block-5").hide();
        $("#add_child").hide();
        $('#remove').show();
      });

      $(document).on('click', '#remove', function(e){
        e.preventDefault(); // Prevent the default anchor link behavior
        // Hide the last child form if there's more than one
        newChildForm.remove();
        childCloneCount--;
        $('#remove').hide(); // Optional: Hide the 'remove' button if you're at the original state
        $(".text-block-5").show();
        $("#add_child").show();
      });
    });
  </script>
  <script>
    $(document).ready(function() {
      var validCities = [];
      var validSchools = [];

      $("#teacher_city").autocomplete({
          source: function(request, response) {
              $.getJSON("/get_cities", function(data) {
                  validCities = data;
                  response($.ui.autocomplete.filter(data, request.term));
              });
          },
          minLength: 0,
          open: function() {
              $(this).autocomplete("widget").css({
                  "max-height": "300px",
                  "overflow-y": "auto",
                  "overflow-x": "hidden",
                  "z-index": "1000"
              });
          }
      }).focus(function() {
          $(this).autocomplete("search", "");
      });

      $("#teacher_city").on("autocompleteselect", function(event, ui) {
          loadSchools(ui.item.value);
      });

      function loadSchools(city) {
          $("#teacher_school_name").autocomplete({
              source: function(request, response) {
                  $.getJSON(`/get_schools/${city}`, function(data) {
                      validSchools = data;
                      response($.ui.autocomplete.filter(data, request.term));
                  });
              },
              minLength: 0,
              open: function() {
                  $(this).autocomplete("widget").css({
                      "max-height": "300px",
                      "overflow-y": "auto",
                      "overflow-x": "hidden",
                      "z-index": "1000"
                  });
              }
          }).focus(function() {
              $(this).autocomplete("search", "");
          });
      }

      // on submit - ensure the selected fields are valid (from the DB)
      $('#teacher_form').on('submit', function(e) {
          var city = $('#teacher_city').val();
          var school = $('#teacher_school_name').val();
          var cityError = $('#city_error');
          var schoolError = $('#school_error');

          cityError.hide();
          schoolError.hide();

          if (!validCities.includes(city)) {
              cityError.show();
              e.preventDefault(); // Prevent form submission
          }

          if (!validSchools.includes(school)) {
              schoolError.show();
              e.preventDefault(); // Prevent form submission
          }
      });
  });

  </script>


<!--  <script>-->
<!--    // Autocomplete functions for the city and school name fields-->

<!--    $(document).ready(function() {-->
<!--      $("#teacher_city").autocomplete({-->
<!--          source: function(request, response) {-->
<!--              $.getJSON("/get_cities", function(data) {-->
<!--                  response($.ui.autocomplete.filter(data, request.term));-->
<!--              });-->
<!--          },-->
<!--          minLength: 1,-->
<!--          select: function(event, ui) {-->
<!--              loadSchools(ui.item.value);-->
<!--          }-->
<!--      });-->

<!--      function loadSchools(city) {-->
<!--          $("#teacher_school_name").autocomplete({-->
<!--              source: `/get_schools/${city}`,-->
<!--              minLength: 1-->
<!--          });-->
<!--      }-->
<!--  });-->

<!--  </script>-->
</body>
</html>